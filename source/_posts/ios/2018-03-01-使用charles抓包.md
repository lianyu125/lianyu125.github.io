---
title: 使用 charles 抓包 
date: 2015-04-16 7:10:09
category: iOS
tags: iOS
keywords: charles
---

##  安装Charles
charles4.2.1破解版安装
链接:[https://pan.baidu.com/s/1smY9rcx](https://pan.baidu.com/s/1smY9rcx)  密码:rxo8 
## charles简介
Charles 是常用的网络封包截取工具，在做移动开发时，我们为了方便调试与服务器端的网络通讯协议，常常需要截取网络封包来分析。
Charles 主要的功能包括：
1. 截取 Http 和 Https 网络封包。
2. 支持重发网络请求，方便后端调试。
3. 支持修改网络请求参数。
4. 支持网络请求的截获并动态修改。
5. 支持模拟慢速网络。
## 配置
### 浏览器和系统配置
为了让任何浏览器（或任何应用程序）使用Charles，必须将浏览器配置为使用Charles作为其代理服务器。 大多数浏览器都可以手动配置，但手动配置很麻烦，因为每次启动和停止Charles时都必须配置和重新配置。
幸运的是，Charles在很多情况下可以自动配置代理设置，包括：
* Windows / Internet Explorer代理设置 - 由大多数Windows应用程序自动使用
* macOS代理设置 - 由大多数macOS应用程序自动使用
* Mozilla Firefox代理设置（所有平台）
### Windows 代理设置
Charles可以自动配置Windows代理设置，以便Internet Explorer和其他Windows应用程序自动开始使用Charles。 默认情况下，每当Charles启动或退出时，Charles都会配置并重新配置Windows代理设置。
Charles代理配置行为可以在代理菜单中的代理设置对话框中的Charles中进行更改。
Windows代理设置在连接选项卡上的Internet选项控制面板中配置，如果您想自己查看它们。
Microsoft Edge还有一个额外的设置，您可能需要浏览about：flags并启用Allow localhost loopback。 这是连接到在本地主机上运行的Charles Proxy所必需的。
### MacOS 代理设置
Charles可以自动配置macOS系统代理设置，以便Safari和其他macOS应用程序自动开始使用Charles。
当您第一次安装Charles时，系统会提示您授予Charles自动配置代理设置的权限。 之后，Charles将在Charles启动或退出时配置并重新配置macOS代理设置。
Charles代理配置行为可以在代理菜单中的代理设置对话框中的Charles中进行更改。
如果您想自己查看，可以在系统偏好设置的网络面板的高级区域中配置macOS代理设置。
### iOS设备代理设置
您的iPhone上使用Charles作为HTTP代理时，您必须在iPhone的设置中手动配置WiFi网络上的HTTP代理设置。

转到设置应用程序，点击Wi-Fi，找到您连接的网络，然后点击它来配置网络。向下滚动到HTTP代理设置，点击手动。在“服务器”字段中输入运行Charles的计算机的IP地址，并在端口字段中运行Charles端口（通常为8888）。将身份验证设置为关。

您iPhone中的所有网络流量都将通过Charles发送。当您首次与iPhone建立连接时，您应该在Charles中看到提示，要求您允许流量。允许此连接。您的iPhone的IP地址将被添加到Charles的访问控制列表中，您可以在代理菜单>访问控制设置中查看和更改。

请记住，当您停止使用Charles时，请在您的设置中禁用HTTP代理服务器，否则会在应用程序中造成混乱的网络故障！

## 参考
参考[官方文档](https://www.charlesproxy.com/documentation/using-charles/ssl-certificates/)
    [唐巧的技术博客](http://blog.devtang.com/2015/11/14/charles-introduction/)
   

